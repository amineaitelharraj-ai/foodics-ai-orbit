Fix for Replit Team: WebSocket Connection to Labeeb Proxy

  File to modify: src/services/labeeb-api.ts

  Problem: The frontend is trying to authenticate by sending a message after connecting, but the Labeeb WebSocket proxy requires the JWT token in the URL query string at connection time (browsers cannot add HTTP headers to WebSocket connections).

  Current broken code (lines 58-78):
  connect(): Promise<void> {
    return new Promise((resolve, reject) => {
      let wsUrl = this.options.baseUrl.replace(/^http/, 'ws')
      if (!wsUrl.endsWith('/ws')) {
        wsUrl += '/ws'  // ❌ WRONG: Appends /ws
      }

      try {
        this.ws = new WebSocket(wsUrl)  // ❌ WRONG: No token in URL
      } catch (error) {
        reject(new Error('Failed to create WebSocket connection'))
        return
      }

      this.ws.onopen = () => {
        this.reconnectAttempts = 0
        this.options.onConnectionChange?.(true)

        if (this.options.token) {
          this.ws?.send(JSON.stringify({ type: 'auth', token: this.options.token }))  // ❌ WRONG
        }

        this.startPingInterval()
        resolve()
      }

  Required fix:
  connect(): Promise<void> {
    return new Promise((resolve, reject) => {
      let wsUrl = this.options.baseUrl.replace(/^http/, 'ws')
      wsUrl = wsUrl.replace(/\/ws$/, '')  // Remove /ws suffix if present
      if (this.options.token) {
        wsUrl += `?token=${encodeURIComponent(this.options.token)}`  // ✅ Token in query string
      }

      console.log('Connecting to WebSocket proxy:', wsUrl.replace(/token=.*/, 'token=[REDACTED]'))

      try {
        this.ws = new WebSocket(wsUrl)
      } catch (error) {
        reject(new Error('Failed to create WebSocket connection'))
        return
      }

      this.ws.onopen = () => {
        this.reconnectAttempts = 0
        this.options.onConnectionChange?.(true)
        console.log('WebSocket connected to Labeeb proxy')
        // Token is now in query string - no auth message needed
        this.startPingInterval()
        resolve()
      }